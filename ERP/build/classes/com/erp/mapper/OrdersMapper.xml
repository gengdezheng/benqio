<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.erp.dao.OrderDao">


	<resultMap type="com.erp.model.Orders" id="orderInfo">
		<result column="orderId" property="id" />
		<result column="orderTime" property="orderTime" />
		<result column="orderType" property="orderType" />
		<result column="orderNumber" property="orderNumber" />
		<result column="clientId" property="clientId" />
		<result column="orderBalance" property="orderBalance" />
		<association property="client"
			javaType="com.erp.model.Client">
			<result column="id" property="id" />
			<result column="name" property="name" />
			<result column="phone" property="phone" />
			<result column="address" property="address" />
		</association>
	</resultMap>

	<select id="orderInfo" resultMap="orderInfo"
		parameterType="com.erp.model.Orders">
		select 
		orders.orderId,
		orders.orderTime,
		orders.orderType,
		orders.orderNumber,
		orders.clientId,
		orders.orderBalance,
		client.name,
		client.phone,
		client.address
        from orders,client
        where
           orders.clientId=client.id
           and
           orders.orderId=#{id}
	</select>


   <insert id="addOrder" parameterType="com.erp.model.Orders">
      insert into orders(orderTime,orderType,orderNumber,clientId,orderBalance)
      values(
      #{orderTime},
      #{orderType},
      #{orderNumber},
      #{clientId},
      #{orderBalance}
      )
   </insert>


</mapper>