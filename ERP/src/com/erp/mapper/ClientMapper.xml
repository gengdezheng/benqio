<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.erp.dao.ClientDao">


	<resultMap type="com.erp.model.Client" id="clientList">
		<result column="id" property="id" />
		<result column="name" property="name" />
		<result column="sex" property="sex" />
		<result column="phone" property="phone" />
		<result column="address" property="address" />
		<result column="age" property="age" />
	</resultMap>

	<select id="clientList" resultMap="clientList">
		select * from client
	</select>
	<select id="getClientById" resultMap="clientList"
		parameterType="java.lang.Integer">
		select * from client where id=#{id}
	</select>


	<resultMap type="com.erp.model.Client" id="clientInfo1">
		<result column="id" property="id" />
		<result column="name" property="name" />
		<result column="sex" property="sex" />
		<result column="phone" property="phone" />
		<result column="address" property="address" />
		<result column="age" property="age" />
		<collection property="orderList"
			ofType="com.erp.model.Orders">
			<result column="orderId" property="id" />
			<result column="orderTime" property="orderTime" />
			<result column="orderType" property="orderType" />
			<result column="orderNumber" property="orderNumber" />
			<result column="orderBalance" property="orderBalance" />
		</collection>
	</resultMap>
	<select id="clientInfo" resultMap="clientInfo1">
		select
		client.*,
		orders.orderId,
		orders.orderTime,
		orders.orderType,
		orders.orderNumber,
		orders.orderBalance
		from
		client,orders
		where
		client.id=orders.clientId
		and
		client.id=#{id}
	</select>


	<delete id="deleteClient" parameterType="com.erp.model.Client">
		delete from client where id=#{id}
	</delete>
	<delete id="deleteClientOrders"
		parameterType="com.erp.model.Client">
		delete from orders where clientId=#{id}
	</delete>


	<update id="updateClient" parameterType="com.erp.model.Client">
		update client
		set
		name=#{name},
		age=#{age},
		phone=#{phone},
		address=#{address},
		sex=#{sex}
		where
		id=#{id}
	</update>


	<insert id="addClient">
		insert into client(name,sex,phone,address,age)
		values(
		  #{clientName},#{clientSex},#{clientPhone},#{clientAddress},#{clientAge}
		)
	</insert>

</mapper>